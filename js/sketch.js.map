{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "g = 0\nids = {}\nreleased = true\n\nclass Game\n\tconstructor : (@x=0, @y=0, @a=0, @s=1, @stack=[]) ->\n\t\t@players = []\n\t\t@level = 1\n\t\tw = width\n\t\th = height   \n\t\t@mode = 0                                                     \n\t\t@players.push new Player \"WASD\",30,30, 60,60\n\t\t@players.push new Player \"&%('\",90,30, 60,60\n\t\t@display = new Button @, 0, -22, 8, 12, \"\",\"\"\n\tpush : ->\n\t\t@stack.push [@x,@y,@a,@s]\n\t\tpush()\n\tpop : ->\n\t\t[@x,@y,@a,@s] = @stack.pop()\n\t\tpop()\n\trotate : (d) ->\n\t\trotate radians d\n\t\t@a += d\n\tscale : (ds) ->\n\t\tscale ds\n\t\t@s *= ds\n\ttranslate : (dx,dy) ->\n\t\tv = radians @a\n\t\t@x += @s * dx * cos(v) - @s * dy * sin(v)\n\t\t@y += @s * dy * cos(v) + @s * dx * sin(v)\n\t\ttranslate dx,dy\n\tdump : (txt) ->\n\t\tprint txt, @x,@y\n\n\tprocess : ->\n\t\t@mode = 1 - @mode\n\t\tif @mode == 0\n\t\t\tautolevel()\n\t\t\t@createProblem()\n\n\tresult : ->\n\t\tfill 127\n\t\trect 0,0,width,height\n\n\t\tif @players[0].stopp == 0\n\t\t\t@players[0].color = color 127\n\t\telse if @players[0].score() < @players[1].score() or @players[1].stopp == 0  \n\t\t\t@players[0].color = color 0,255,0\n\t\telse\n\t\t\t@players[0].color = color 255,0,0\n\n\t\tif @players[1].stopp == 0\n\t\t\t@players[1].color = color 127\n\t\telse if @players[1].score() < @players[0].score() or @players[0].stopp == 0  \n\t\t\t@players[1].color = color 0,255,0\n\t\telse\n\t\t\t@players[1].color = color 255,0,0\n\n\t\tfor player in @players\n\t\t\tplayer.result()\n\n\t\t@solve_result()\t\n\n\tsolve_result : ->\n\t\tfill 0\n\t\tn = 20 \n\t\tH = height / n\n\t\ttextSize H\n\t\tsolution = solve(@players[0].history[0], @players[0].target)\n\n\t\tfor number,i in solution\n\t\t\tx = int i / n\n\t\t\ty = int i % n\n\t\t\ttext number, x*100, -8.5*H + y*H\t\t\n\n\tcreateProblem : ->\n\t\tn = int Math.pow 2, 4+@level/3 # nodes\n\t\ta = int random 1,n/2\n\t\tlst = [a]\n\t\ttree = [a]\n\t\tlst2 = []\n\t\tsave = (item) ->\n\t\t\tif Math.floor(item) == item and item <= n\n\t\t\t\tif item not in tree\n\t\t\t\t\tlst2.push item\n\t\t\t\t\ttree.push item\n\t\tfor j in range @level\n\t\t\tlst2 = []\n\t\t\tfor item in lst\n\t\t\t\tsave item+2 \n\t\t\t\tsave item*2\n\t\t\t\tsave item/2\n\t\t\tlst = lst2\n\t\ti = int random lst.length\n\t\tb = lst[i]\n\n\t\td = new Date()\n\t\tms = int d.getTime()\n\t\tfor player in @players\n\t\t\tplayer.history = [a]\n\t\t\tplayer.target = b\n\t\t\tplayer.count = 0\n\t\t\tplayer.start = ms \n\t\t\tplayer.stopp = 0\n\t\t\tplayer.level = @level\n\nsetup = ->\n\tcreateCanvas windowWidth, windowHeight\n\tframeRate 15\n\ttextAlign CENTER,CENTER\n\trectMode CENTER\n\tg = new Game()\n\tg.createProblem()\t\t\n\txdraw()\n\nxdraw = ->\n\tg.push()\n\tg.translate width/2, height/2\t\n\n\tfor player,i in g.players\n\t\tg.push()\n\t\tg.translate (2*i-1) * width/4, 0\n\t\tplayer.draw()\n\t\tg.pop()\n\tg.result() if g.mode==1\n\tg.display.draw()\t\n\tg.pop()\n\tfalse # to prevent double clock on Android\n\n# touchStarted = -> \n# \tfor touch in touches\n# \t\tif touch.id not of ids \n# \t\t\tids[touch.id] = touch\n# \t\t\tfor player in g.players\n# \t\t\t\tplayer.touchStarted(touch.x,touch.y)\n# \tids = {} if touch.length == 0\n# \tg.display.touchStarted(touch.x,touch.y)\n# \txdraw()\n\nmouseReleased = -> # to make Android work \n\treleased = true \n\tfalse\n\ntouchStarted = -> \n\tplayer.mousePressed() for player in g.players\n\tg.display.mousePressed()\n\txdraw()\n\nmousePressed = ->\n\tif !released then return # to make Android work \n\treleased = false\n\tplayer.mousePressed() for player in g.players\n\tg.display.mousePressed()\n\txdraw()\n\nkeyPressed = ->\n\tplayer.keyPressed(key) for player in g.players\n\tif key == ' ' \n\t\tautolevel()\n\t\tg.createProblem()\n\txdraw()\n\nautolevel = ->\n\tfinished = 0\n\tperfect = 0\n\tfor player in g.players\n\t\tif player.finished()\n\t\t\tfinished++\n\t\tif player.perfect g.level\n\t\t\tperfect++\t\n\tif perfect > 0\n\t\tg.level++\n\telse \n\t\tg.level--\n\tif g.level == 0\n\t\tg.level = 1\n"
  ]
}